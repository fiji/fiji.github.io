<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 769 &ndash; Fiji window no longer closes child windows and it doesn't remember its position</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    
      

      
      



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" >

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    
    
  </head>



  <body onload=""
        class=" bz_bug bz_status_RESOLVED bz_product_Fiji bz_component_Other bz_bug_769 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;769</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Fiji window no longer closes child windows and it doesn't remember its position</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2014-06-15 09:17:09 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="bugzilla-body">


<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2014-06-15 09:17:09">
  <input type="hidden" name="longdesclength" value="22">
  <input type="hidden" name="id" value="769">
  <input type="hidden" name="token" value="1492731782-7qe06mO54ppGgkth0eCNGqBlZJ9ctLOJEpOvtNI-YJs">
<div class="bz_alias_short_desc_container edit_form">
     <a href="769.html"><b>Bug&nbsp;769</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Fiji window no longer closes child windows and it doesn't remember its position</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
  >Summary:</a>
</label>
</th>
          <td>Fiji window no longer closes child windows and it doesn't remember its position
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a>Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Other</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       Linux
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a><u>I</u>mportance</a></label>:
      </th>
      <td>P5
       enhancement
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2014-06-11 02:16 CDT by <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2014-06-15 09:17 CDT 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>3 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="hinerm">hinerm</option>
                <option value="jan.eglinger">jan.eglinger</option>
                <option value="johannes.schindelin">johannes.schindelin</option>
            </select>
        </div>
          
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    


<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_image_png">
        <td valign="top">
            <a href="attachment.cgi?id=158"
               title="View the content of the attachment">
          <b>add</b></a>

          <span class="bz_attach_extra_info">
              (18.29 KB,
                image/png)

            <br>
            <a href="#attach_158"
               title="Go to the comment associated with the attachment">2014-06-11 10:37 CDT</a>,

            <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=158&amp;action=edit">Details</a>
        </td>
      </tr>

  </table>
<br>

  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 02:16:43 CDT
        </span>
      </div>



<pre class="bz_comment_text" >The latest Fiji update will get me shot by my Pet-Ct users.
<a href="http://sourceforge.net/p/bifijiplugins/wiki/Pet-Ct%20Viewer/">http://sourceforge.net/p/bifijiplugins/wiki/Pet-Ct%20Viewer/</a>

I have a startup macro which opens B&amp;C among other things. It used to be that closing the Fiji window killed all the child windows and now the poor user needs to kill all the children manually. Please fix this ASAP.

It now also fails to remember the position of the Fiji window, which was also a very nice feature. For that one they won't kill me, but they won't be happy.

Thanks,
Ilan</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 08:41:25 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Ilan,

 Side question - is your plugin on an update site? I saw update sites referenced in your readme, but don't see your plugin on <a href="http://fiji.sc/List_of_update_sites">http://fiji.sc/List_of_update_sites</a>. It would be cool if you added it!

Anyway just wanted you to know that I was able to reproduce this, partially, and am looking into it now... on my end, when your startup macro ran, the B/C window closed but the postage stamp window did not. Moot point because even with vanilla Fiji, running B/C and closing caused Fiji to remain open even with the windows closed. So something definitely isn't being disposed properly.

<span class="quote">&gt;It now also fails to remember the position of the Fiji window, which was also a &gt;very nice feature</span >

Indeed, this is a bug with our wrapping of the ImageJ 1.x UI. Also looking into that now.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 09:14:49 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,
I decided to try and see if I can add my software. I need a Fiji Wiki account.
I assume that isn't the same as the source forge wiki account for the help.
<a href="http://sourceforge.net/p/bifijiplugins/wiki/Main_Page/">http://sourceforge.net/p/bifijiplugins/wiki/Main_Page/</a>

If I can post debug messages, perhaps I already have a Fiji Wiki account?
What should I fill in the text box under Add Personal Site for Fiji Wiki account?
Presumably somebody has to authorize it as well?
Likewise, I'm not sure what URL to use - source forge, but what exactly?

Thanks,
Ilan</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jan Eglinger</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 09:21:32 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Ilan,

you should be able to create a wiki account right from the Updater. See here:
<a href="http://fiji.sc/How_to_set_up_and_populate_an_update_site">http://fiji.sc/How_to_set_up_and_populate_an_update_site</a>

Jan</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 10:37:19 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=158" name="attach_158" title="add">attachment 158</a> <a href="attachment.cgi?id=158&amp;action=edit" title="add">[details]</a></span>
add</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 10:38:56 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Jan,
I got to the Add Personal Site and only 1 text box isn't grayed out.
I'll include a screen shot.

Thanks,
Ilan</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 10:39:53 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Ilan,

I just wanted you to know that the first part of this bug is resolved in our source code (not uploaded to Fiji yet). You can see the fix here: <a href="https://github.com/imagej/imagej-legacy/commit/b58a519ef48fba8c489e00d322938c5b0514730b">https://github.com/imagej/imagej-legacy/commit/b58a519ef48fba8c489e00d322938c5b0514730b</a> and if you would like to test the new code before it's uploaded, it can be downloaded from: <a href="http://jenkins.imagej.net/job/ImageJ-legacy/lastSuccessfulBuild/artifact/target/imagej-legacy-0.5.10-SNAPSHOT.jar">http://jenkins.imagej.net/job/ImageJ-legacy/lastSuccessfulBuild/artifact/target/imagej-legacy-0.5.10-SNAPSHOT.jar</a>

However, I wanted to point out that this does not quite fix the problem for your plugin in particular. I was looking at your Read_CD plugin, for example, that's invoked by your startup macro. It pops a java.awt.Frame, but does not register itself with the ImageJ 1.x Window framework.

If a Window is not registered with the framework we simply can't close it via ImageJ2. It's not a problem in typical ImageJ 1.x use because it calls System.exit() when shutting down.. so it doesn't matter that the windows aren't actually closed.

I would suggest updating any of your windows that display to call ij.WindowManager.addWindow on themselves. This will ensure IJ1 knows about your windows, and then they will be properly closed by ImageJ2 on shutdown.

Also, I have had some issues registering for Wiki accounts via the updater before. So if that doesn't work for you, you can also sign up on the wiki: <a href="http://fiji.sc/index.php?title=Special:UserLogin&amp;type=signup">http://fiji.sc/index.php?title=Special:UserLogin&amp;type=signup</a>


On to Window locations!</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 10:41:04 CDT
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt; I got to the Add Personal Site and only 1 text box isn't grayed out.</span >

Note the bug listed here: <a href="http://fiji.sc/How_to_set_up_and_populate_an_update_site#Specifying_an_existing_Fiji_Wiki_account">http://fiji.sc/How_to_set_up_and_populate_an_update_site#Specifying_an_existing_Fiji_Wiki_account</a></pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 10:45:21 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,
Thanks for your very speedy service. Read CD is under my control so I can implement whatever is needed - as with anything else under my control. However B&amp;C (brightness - contrast) isn't mine and I have no control over it.

Thanks for telling me what I need to do to make my own programs close. I will certainly do what needs to be done.

Ilan</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 11:07:46 CDT
        </span>
      </div>



<pre class="bz_comment_text" >No worries Ilan! Brightness/Contrast is part of the core ImageJ 1.x and it is registered in the WindowManager. So I did confirm that it is closed by my fix :) 

Thanks again for pointing out these issues, as they are really both critical problems.</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 12:39:52 CDT
        </span>
      </div>



<pre class="bz_comment_text" >OK, as of <a href="https://github.com/imagej/imagej-legacy/commit/8bf1b175ffaa6fd512575fed6448c249c21c3cb3">https://github.com/imagej/imagej-legacy/commit/8bf1b175ffaa6fd512575fed6448c249c21c3cb3</a> the Fiji window should now restore its location properly.

These changes were uploaded to Fiji, so both of these issues should be fixed when you update.</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 12:54:42 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Many thanks Mark.
To save a bit of time, do you have an example of the code I need to add to make the modules known to ImageJ?

Ilan</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 13:53:05 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Ilan,

So there's a Read_CD.java that is a plugin, and in its run() method it displays itself right? (sorry, I just glanced at the .class files)

In that same run method, you should just have to call:

WindowManager.addWindow(this);

and that should register your window with ImageJ 1.x.

Then repeat with your other Window-based plugins (or extend a common abstract class, etc... as desired).

See the ContrastAdjuster for a concrete example:
<a href="https://github.com/imagej/ImageJA/blob/master/src/main/java/ij/plugin/frame/ContrastAdjuster.java#L85">https://github.com/imagej/ImageJA/blob/master/src/main/java/ij/plugin/frame/ContrastAdjuster.java#L85</a>

Let me know if any of that is unclear!</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-12 01:34:12 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,
I want to thank you again for all your help. I downloaded the new software and it does indeed kill B&amp;C and remember its last postion. Very nice...
However I'm still not quite there. I didn't want to bother you with my code since I thought it was my problem to get it to work and I shouldn't be taking your time and energy.
I added the WindowsManager.addWindow but that isn't enough. I got a bit of a laugh that it isn't just my problem. I tried to add my site, which I also can't get to fly, and that too stays around once Fiji has been killed. (Maybe this should be the case, but my gut feeling is that it should go away.)

I thought the key might be IJ.register(class) but that too isn't enough. I updated source forge so at least WindowManager.addWindow is there. IJ.register isn't on source forge. I thought it might be PlugInDialog so I tried that but the Fix Imports didn't know what to do with it - and neither do I.

I use NetBeans which is very nice at doing all the dialogs. I make a tiny part for the interface and do the rest with NetBeans.

public class Read_CD implements PlugIn {

	&#64;Override
	public void run(String arg) {
		ReadCdStudies dlg = new ReadCdStudies(null, false);
		dlg.setVisible(true);
	}
}

The main part is

public class ReadCdStudies extends javax.swing.JDialog implements MouseListener {
	static final long serialVersionUID = ChoosePetCt.serialVersionUID;
	static final int TblPatName = 0;
	static final int TblStudy = 1;
	static final int TblDate = 2;
	static final int TblSeries = 3;
	static final int TblPatID = 4;
	static final int numFails = 5;	// 3 is boarderline, try 5

	/**
	 * Creates new form ReadCdStudies
	 * &#64;param parent
	 * &#64;param modal
	 */
	public ReadCdStudies(java.awt.Frame parent, boolean modal) {
		super(parent, modal);
		initComponents();
		WindowManager.addWindow(parent);
		init();
	}
	
	&#64;SuppressWarnings(&quot;unchecked&quot;)
	private void init() {
		IJ.register(Read_CD.class);
		jPrefer = Preferences.userNodeForPackage(ReadCdStudies.class);
		jPrefer = jPrefer.node(&quot;biplugins&quot;);
		jCurrCD = jPrefer.getInt(&quot;current CD&quot;, 0);
......

For the IJ.register I tried both ReadCdStudies.class as well as the parent Read_CD.class. Neither is enough to make it die.

I now have an account on Fiji called ilan but I still can't add my site as only 1 text box is active, and the password is grayed out.

Thanks again,
Ilan</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-12 01:41:47 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I see the parent is null. I've got to find an object here...</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-12 03:28:22 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,
This seems to be non trivial. The constructor comes from the way I used NetBeans to create a new project. The Read_CD is certainly not a frame and ReadCdStudies is a JDialog and not a JFrame.
I still can't figure a way to get anything like a frame from a dialog so that addWindow will be happy.
What was magic about the old version that it had no problems killing all the children?

Ilan</pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-12 04:21:01 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,
I found addWindow could take a window and not just a frame. I am using a very old version of ImageJ for debugging purposes and it didn't have the addWindow(Window win), so I fixed it.
In short now it is killing my dialog and the problem is solved.

Thanks,
Ilan</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-12 07:05:56 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Ilan,

 That's great that you got it working! It's good to hear everything's working as intended now.

 As for the update site, yes there is an unfortunate bug with creating wiki sites through the updater, or logging in when your update site password (different from your Wiki account password) is not initialized.

 Log in to the fiji.sc wiki and go to this page: <a href="http://fiji.sc/Special:ChangeUploadPassword">http://fiji.sc/Special:ChangeUploadPassword</a> and set the password for &quot;Your personal upload site&quot;.

 After you do this, go back to Fiji and go through <a href="http://fiji.sc/How_to_set_up_and_populate_an_update_site">http://fiji.sc/How_to_set_up_and_populate_an_update_site</a> again, using your existing Fiji wiki account to log in.

 You should be able to upload files to your update site at that point, and then to publicize it you just need to edit <a href="http://fiji.sc/List_of_update_sites">http://fiji.sc/List_of_update_sites</a> and add an entry for your site (alphabetically sorted).

Let me know if you run into any problems with these steps!

- Mark</pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-12 07:46:34 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,
Apparently I don't understand something. I see most people use various sites and my users know my source forge site. It would be most convenient to just continue with the same site.
I get the impression that I'm supposed to upload to some new place? Huh?

I made a small page on Fiji just so something would be &quot;initialized&quot;. Now I can add &quot;My site&quot;, but that is a dumb name and I can't figure out how to change it to Pet-Ct or Beth Israel plugins or something else.

If my stuff remains on source forge can the user somehow specify which plugins he wants to download? Up until now I have been using a PluginsUpdater which Johannes wrote for me way back when. It takes a list of plugins to update. Each user can choose what he wishes.

So I need a more intelligent name for the site and the ability to point it to source forge.

Thanks again,
Ilan</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jan Eglinger</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-12 08:04:11 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Ilan,

having used update sites myself, maybe I can clarify a bit:

- an ImageJ update site contains the up-to-date files for the plugins served via the site, and a file (db.xml.gz) storing information about all files served by the site, including previous versions.

- an update site can be any folder accessible via internet, where *you* can upload files via ssh, webdav or ftp, and where *any user* can download files via http(s)

- the Fiji wiki provides a comfortable, but not the only place to store update sites, have a look at <a href="http://fiji.sc/List_of_update_sites">http://fiji.sc/List_of_update_sites</a> for examples using different URLs.

- an update site has nothing to do with a wiki page, it's just for convenience that the Fiji wiki account creation can also be used to create and populate an update site on sites.imagej.net

- if you want to host the update site (i.e. the folder containing db.xml.gz and the files) on your own server, you just need to provide the updater with appropriate shh/webdav logon credentials, and it will create an update site on that server.

If you feel that the description on the Fiji wiki does not sufficiently explain this, please feel free to edit the instructions,
<a href="http://fiji.sc/How_to_set_up_and_populate_an_update_site">http://fiji.sc/How_to_set_up_and_populate_an_update_site</a>
using your newly created Fiji wiki account :)

Hth,
Jan</pre>
    </div><div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ilan Tal</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-15 01:15:54 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Jan and Mark,
I may not be able to publish my site on the Fiji list. I tried to use the Add button on the Manage update sites. I could edit the fields but it didn't like my URL. Source forge is very nice for open source programs but it may or may not have db.xml.gz. In any case the PluginUpdater which Johannes wrote for me way back when does a very nice job.
I tried to make the URL point to a help page and/or to the Files page but it wasn't happy with it.
Likewise the documentation requests to keep alphabetical ordering and there was no way I could control that. My attempt was at the bottom of the list. It wasn't clear to me if I was writing to only my local machine, or to a server. In any case I deleted my attempt as a failure. For the moment I don't know how to include my plugins in the list of known sites.

Thanks,
Ilan</pre>
    </div><div id="c21" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-15 09:17:09 CDT
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt; I may not be able to publish my site on the Fiji list.</span >

Ilan, would you mind creating a new ticket for that? It makes it much, much easier on this side to keep track of open issues and to find the correct one quickly when one has news to share.

It also correctly reflects how quickly we fix bugs (which you cannot see when people start adding new problems in the comment section of an already-addressed bug).</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>


</div>

</body>
</html>
