<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 465 &ndash; Trackmate - missing Save dialog for Export tracks to XML</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    
      

      
      



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" >

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    
    
  </head>



  <body onload=""
        class=" bz_bug bz_status_RESOLVED bz_product_Fiji bz_component_Plugins bz_bug_465 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;465</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Trackmate - missing Save dialog for Export tracks to XML</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2014-08-22 12:00:31 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="bugzilla-body">


<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2014-08-22 12:00:31">
  <input type="hidden" name="longdesclength" value="13">
  <input type="hidden" name="id" value="465">
  <input type="hidden" name="token" value="1492731653-OLFDtWQKy9_u8TVXHcfZ7Uwh74saB12q-iF43zzFpmk">
<div class="bz_alias_short_desc_container edit_form">
     <a href="465.html"><b>Bug&nbsp;465</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Trackmate - missing Save dialog for Export tracks to XML</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
  >Summary:</a>
</label>
</th>
          <td>Trackmate - missing Save dialog for Export tracks to XML
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a>Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Plugins</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       Windows
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P2
       normal
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2012-08-14 01:16 CDT by <span class="vcard"><span class="fn">Ron Rock</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2014-08-22 12:00 CDT 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>4 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="ctrueden">ctrueden</option>
                <option value="jeanyves.tinevez">jeanyves.tinevez</option>
                <option value="johannes.schindelin">johannes.schindelin</option>
                <option value="tero.p.heikkinen">tero.p.heikkinen</option>
            </select>
        </div>
          
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    



  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ron Rock</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-08-14 01:16:23 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi JY,
We've run into a new (and weird) problem with the &quot;Export to XML file&quot; action at the end.  This problem showed up aroud the same time as the problem with the Fiji updater a couple of weeks ago.   The progress bar appears and runs to completion, but the save dialog never shows up.    The console gives me:

8/13/12 5:10:37.740 PM [0x0-0x6a16a1].org.fiji: Exception in thread &quot;TrackMate action thread&quot; java.lang.StringIndexOutOfBoundsException: String index out of range: -1
8/13/12 5:10:37.740 PM [0x0-0x6a16a1].org.fiji: 	at java.lang.String.substring(String.java:1937)
8/13/12 5:10:37.740 PM [0x0-0x6a16a1].org.fiji: 	at fiji.plugin.trackmate.action.ExportTracksToXML.execute(ExportTracksToXML.java:58)
8/13/12 5:10:37.740 PM [0x0-0x6a16a1].org.fiji: 	at fiji.plugin.trackmate.gui.ActionChooserPanel$1$1.run(ActionChooserPanel.java:116)

Funny thing is that this only shows up for some of our movie files.  With other movies, we can go all the way to the end without a problem.  I have a trackmate XML file (the big one) that reproduces the problem, if you'd like that.

Thanks for fixing the earlier UI issues a few months ago.  I can confirm that one problem I had was low RAM / VM thrashing.  New computer is on it's way to replace this 5-yr old beast...

Cheers,
Ron


Information about your version of Java - this information is useful for the Fiji developers:

  os.arch =&gt; x86_64
  os.name =&gt; Mac OS X
  os.version =&gt; 10.7.4
  java.version =&gt; 1.6.0_33
  java.vendor =&gt; Apple Inc.
  java.runtime.name =&gt; Java(TM) SE Runtime Environment
  java.runtime.version =&gt; 1.6.0_33-b03-424-11M3720
  java.vm.name =&gt; Java HotSpot(TM) 64-Bit Server VM
  java.vm.version =&gt; 20.8-b03-424
  java.vm.vendor =&gt; Apple Inc.
  java.vm.info =&gt; mixed mode
  java.awt.graphicsenv =&gt; apple.awt.CGraphicsEnvironment
  java.specification.name =&gt; Java Platform API Specification
  java.specification.version =&gt; 1.6
  sun.cpu.endian =&gt; little
  sun.desktop =&gt; null
  file.separator =&gt; /

The up-to-date check says: UP_TO_DATE

Information relevant to JAVA_HOME related problems:

  JAVA_HOME is set to: null
  ij.dir =&gt; /Applications/Fiji.app</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-08-14 02:16:19 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hey Ron, it would be helpful if you could upload said movie via Help&gt;Upload Sample Image. Especially since you claim that the problem occurs only with that movie...</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ron Rock</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-08-14 21:28:42 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Ok, I've sorted one more thing out which may help.  The uploaded movie &quot;MYO (problem).tif&quot; demonstrates the issue.  &quot;MYO.tif&quot; does not have the issue.  The only difference is that I took MYO (problem).tif, re-ordered the hyperstack swapping z and t, and saved.  Odd that the problem shows up all the way at the end.

For tracking, I used:
blob diameter 5 px
Initial threshold: leave ~2700 spots
No filters on spots
LAP tracker, max distance 5 px, no gap closing
No filters

Console gives the same error as before with MYO (problem).tif.

Hope this helps.

Cheers,
Ron</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jean-Yves Tinevez</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-08-20 14:23:53 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Ok I downloaded the 2 movies.
But I miss the metadata: is it 3D over time or 2D over time? Can you give me the dimensionality of the images? I fail to guess it.
best
jy</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-07 09:54:50 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Closing due to missing feedback.</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">tero.p.heikkinen
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-19 05:05:27 CDT
        </span>
      </div>



<pre class="bz_comment_text" >This bug is easy to reproduce with following

1) Get a czi files for example, that needs to be stiched
2) Use stiching (grid/collection stiching) to open image
3) Use trackmate and try to export XML track

Or simply split channels and try running tracking to one channel.

If I save stiched file and then do tracking, XML saving works. So it seems that when you are doing things &quot;on fly&quot;, like stiching, splitting, etc, XML saving does not work. Maybe because save dialog tries to open folder where current file is located and when there is no file, we end up unexpected behaviour.</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-19 08:12:44 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Tero, this was crucial information, but since it has been such a long time, you will probably agree that you expected others to do substantially more than you were actually prepared to do on your end. That is unfortunately an unsustainable concept, so if you really want to see this bug resolved, you need to provide a (small!) czi file and then provide *exact* instructions (including, for example, the exact values of the parameters you chose) to reproduce. Remember, this is not commercial software, you must not expect other people to spend more time than you do, just to help you resolve *your* problem.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">tero.p.heikkinen
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-20 06:03:01 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Easiest way to reproduce *my problem* that is *in my professional opinion* a bug that is rather annoying. Like I said problem is based on a fact that the file does not actually exist and dialog itself does not know where it should open. 

I would fix this by myself but I don't have time to start studying how every piece of open source software that I occasionally need to use. Also no need to fix it since it can be circumvented just by saving manually stiched / splitted layers. It just rather annoying when files are tens of gigabytes...

But here I give you very easy way to reproduce issue without any need to get any czi files etc.

1) file-&gt;open samples-&gt;tracks for trackmate
2) image-&gt;duplicate-&gt;check duplicate stack and use whole range-&gt;ok
3) close the original file
4) Now you should be working with FakeTracks-1.tif (or some other number)
5) Plugins-&gt;Tracking-&gt;TrackMate and click next until you reach end of the process
6) Select action-&gt;export tracks to XML file

Experienced behaviour: No dialog is opened
Expected behaviour: Open dialog eg to the &quot;root folder&quot; or if possible last used folder. It really does not matter if I get to save the XML somewhere at least.

br, Tero</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-20 06:21:17 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Sorry, that's not the way this project works (or for that matter, how it could work in a sustainable manner).</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-21 14:23:36 CDT
        </span>
      </div>



<pre class="bz_comment_text" >&#64;Tero: Very sorry for the earlier rudeness, and thank you very much for the recipe to reproduce. However, following your instructions with a fully updated Fiji, I was successfully able to export the tracks to an XML file on my OS X machine.

That said, I did look at the source code relating to the original stack trace that Ron posted, and am fairly confident what the problem is, so I committed a tentative fix:

<a href="https://github.com/fiji/TrackMate/commit/588e9780acc343b36d6193ddef92c138201c0469">https://github.com/fiji/TrackMate/commit/588e9780acc343b36d6193ddef92c138201c0469</a>

If you enable the TrackMate-dev update site, you should receive the fix. Please reopen the issue if you still experience the problem.</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jean-Yves Tinevez</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-21 15:41:17 CDT
        </span>
      </div>



<pre class="bz_comment_text" >&#64;Tero: I could not reproduce the bug either, on win7, following your recipe and using the v2.4.0 (falsely named v2.4.0-SNAPSHOT in the title bar). 

However there have been a bug like this in v2.2.0 or prior (not sure) linked indeed to working on images not existing on the filesystem. Just to be sure: with what version have you been generating this bug?</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">tero.p.heikkinen
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-22 05:01:19 CDT
        </span>
      </div>



<pre class="bz_comment_text" >&#64;Jean-Yves 
I was using Fiji with following specs: Win7 + Trackmate v2.4.0-snapshot + ImageJ 1.49e

&#64;Curtis no problem with rudeness. I'm was not just used to that kind of reaction with open source projects, when reporting a bug.

I also last night tried to look from the source and was looking the same java-file for bug. Unfortunately my Java skills are no longer fresh...

I tried to start fiji after using Trackmate-dev update site and now software crashes on startup. I think there was too many dev-packages coming in. I'll try later again with fresh installation. I'll report my test findings. And just to be sure I'll test with Os X and Win 7 because file systems between them are bit different.

Is the communication of fiji and plugins now in github or here in bugzilla?</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-22 12:00:31 CDT
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt; Is the communication of fiji and plugins
&gt; now in github or here in bugzilla?</span >

Wherever you are more comfortable, Tero. The bugzilla is more &quot;user facing&quot; while the GitHub Issues are more &quot;developer facing&quot;. Also, as a rule of thumb, we tend to file a GitHub Issue whenever anything here on the Bugzilla turns into more of a feature request. There is also only one Bugzilla, and it is connected to the &quot;Report a Bug&quot; plugin, which is handy, whereas every ImageJ and Fiji component has its own GitHub issue tracker, making it more complex to locate issues there (though GitHub does have a very nice global search feature).</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>


</div>

</body>
</html>
