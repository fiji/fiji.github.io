<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 204 &ndash; Problem on opening images from the editor and vice versa</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    
      

      
      



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" >

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    
    
  </head>



  <body onload=""
        class=" bz_bug bz_status_RESOLVED bz_product_Fiji bz_component_Other bz_bug_204 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;204</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Problem on opening images from the editor and vice versa</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2010-09-22 18:17:35 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="bugzilla-body">


<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2010-09-22 18:17:35">
  <input type="hidden" name="longdesclength" value="10">
  <input type="hidden" name="id" value="204">
  <input type="hidden" name="token" value="1492731545-gx5DiXwFE38lfbxRbn97leedhExbtPwheIQ1FIkWbdI">
<div class="bz_alias_short_desc_container edit_form">
     <a href="show_bug.cgi?id=204"><b>Bug&nbsp;204</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Problem on opening images from the editor and vice versa</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td>Problem on opening images from the editor and vice versa
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Fiji"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Other</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">Macintosh
       Mac OS
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P2
       normal
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2010-08-01 17:15 CDT by <span class="vcard"><span class="fn">Thomas Julou</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2010-09-22 18:17 CDT 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>0 
          users
        <div id="cc_edit_area">
          <br>
        </div>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    



  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Thomas Julou</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-01 17:15:31 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hello,

Among other (numerous) reasons, I am interested in Fiji because of its nice script editor.
Unfortunately I noticed two bugs with it:
 - when the editor is active, the open menu is accessible and works fine to open additional text files (displaid as new tab). However if I select an image, Fiji will try forever to open it without success and basically freeze.

- to the contrary, if one script and one image are already opened, if the image is active and I use the open menu to open another text file, Fiji freezes after opening a new tab. I get a similar freezeif I drag and drop a text file on the status bar while another text file is already opened.

This is with Fiji 1.44d on mac os 10.5.8, Java 1.5.0_24 [64-bit].
Thank you in advance for your help.

Regards,

Thomas Julou</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Thomas Julou</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-01 17:16:02 CDT
        </span>
      </div>



<pre class="bz_comment_text" >This may be linked to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Crash upon image loading"
   href="show_bug.cgi?id=192">bug 192</a>… Not sure.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">G. Landini</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-01 18:15:18 CDT
        </span>
      </div>



<pre class="bz_comment_text" >You do not specify which &quot;File&quot; menu...

Everything seems to work fine here under linux 64 and Java 1.6.0_20.
I can open an image, with an open macro in the script editor and I could open a further image and a further image from the Samples link.

I wonder if you are trying to open a very large image from the File menu of the Script Editor (which would not be the right thing to do anyway). Just for the record I can open images like that and they are shown as garbled text in a new Script Editor tab.
</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Thomas Julou</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-02 11:22:43 CDT
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="#c2">comment #2</a>)
<span class="quote">&gt; You do not specify which &quot;File&quot; menu...</span >

Sorry…

<span class="quote">&gt;  - when the editor is active, the open menu is accessible and works fine to
&gt; open additional text files (displaid as new tab). However if I select an image,
&gt; Fiji will try forever to open it without success and basically freeze.</span >

This is with the editor File menu. I agree I should not open an image this way. However, as the open menu item has the same shortcut, it is not very convenient: maybe the editor open item could be accessed with cmd-alt-O rather than cmd-O (already in use for Open in the main menu file).

<span class="quote">&gt; - to the contrary, if one script and one image are already opened, if the image
&gt; is active and I use the open menu to open another text file, Fiji freezes after
&gt; opening a new tab. I get a similar freezeif I drag and drop a text file on the
&gt; status bar while another text file is already opened.</span >

This is when using the general File menu. I agree I could use the editor menu but again they share the same shortcut. Moreover, it seems to me reasonable to expect that the general open menu is able to open an additional text file when one is already open…

<span class="quote">&gt; Everything seems to work fine here under linux 64 and Java 1.6.0_20.
&gt; I can open an image, with an open macro in the script editor and I could open a
&gt; further image and a further image from the Samples link.</span >

Do you think using 1.5.0 may be the reason for the trouble?

<span class="quote">&gt; I wonder if you are trying to open a very large image from the File menu of the
&gt; Script Editor (which would not be the right thing to do anyway). Just for the
&gt; record I can open images like that and they are shown as garbled text in a new
&gt; Script Editor tab.</span >

This is it: smaller image files are shown as garbled text in a new tab…</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-29 19:28:50 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Unfortunately, I do not see any convenient way out. The menu of the script editor is really only meant for working with scripts, and it would mean a lot of work to change the behavior such that, e.g. File&gt;Open would try to open as image before trying to open as text.

I would be willing to guide somebody through the required work, but I do not want to do it myself, nor do I have the time to.</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Thomas Julou</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-09-04 11:46:58 CDT
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="#c4">comment #4</a>)
<span class="quote">&gt; Unfortunately, I do not see any convenient way out. The menu of the script
&gt; editor is really only meant for working with scripts, and it would mean a lot
&gt; of work to change the behavior such that, e.g. File&gt;Open would try to open as
&gt; image before trying to open as text.
&gt; 
&gt; I would be willing to guide somebody through the required work, but I do not
&gt; want to do it myself, nor do I have the time to.</span >

Maybe a light workaround would be:
 - to check the size of the file opened by the script editor and to display a warning (do you really want to proceed?) if it's larger than 100kb or 1mb
 - to set cmd-alt-O as the script open menu shortcut
 
And still, there will remain a need to fix the drag and drop bug for text files (when one is already opened)… at least to my opinion. For this, I have no suggestion as I have no clue of the underlying code…</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-09-17 11:14:41 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I thought a bit more about this. How about using the list of supported languages' extensions and resort to IJ.open() (i.e. let ImageJ handle the loading) when the respective file name does not have any of these extensions? Would that be good enough for you?</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Thomas Julou</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-09-17 11:27:56 CDT
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="#c6">comment #6</a>)
<span class="quote">&gt; I thought a bit more about this. How about using the list of supported
&gt; languages' extensions and resort to IJ.open() (i.e. let ImageJ handle the
&gt; loading) when the respective file name does not have any of these extensions?
&gt; Would that be good enough for you?</span >

That sounds good actually...</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-09-22 15:40:41 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hmm. The proposed method would have made it hard to load .html and .txt files (as they are not extensions of registered languages). So I went for this instead: the files are checked first whether they are binary (simple heuristic: if there is a NUL byte in the first 8000, it is not text). If they are, ImageJ opens the thing. Uploaded and pushed.</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Thomas Julou</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-09-22 18:17:35 CDT
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="#c8">comment #8</a>)
<span class="quote">&gt; Hmm. The proposed method would have made it hard to load .html and .txt files
&gt; (as they are not extensions of registered languages). So I went for this
&gt; instead: the files are checked first whether they are binary (simple heuristic:
&gt; if there is a NUL byte in the first 8000, it is not text). If they are, ImageJ
&gt; opens the thing. Uploaded and pushed.</span >

That works great!

Still remains a bug when trying to open &quot;text&quot; files not from the editor menu:
 - if one tab is already open in the editor, Fiji will crash if I drag and drop another text file on the status bar
 - if one tab is already open in the editor, opening a text file from the image menu, will open a new empty tab called New_ and freeze Fiji.

Any idea on how to fix this? Shall I open a new bug report for this?</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>


</div>

</body>
</html>
