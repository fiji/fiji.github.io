<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 1161 &ndash; Sld files open in Windows but not Mac</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    
      

      
      



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" >

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    
    
  </head>



  <body onload=""
        class=" bz_bug bz_status_RESOLVED bz_product_Fiji bz_component_Bio-Formats bz_bug_1161 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;1161</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Sld files open in Windows but not Mac</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2015-10-05 12:32:53 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="bugzilla-body">


<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2015-10-05 12:32:53">
  <input type="hidden" name="longdesclength" value="8">
  <input type="hidden" name="id" value="1161">
  <input type="hidden" name="token" value="1492731947-qvs54VYACsfYpd_KelNppg02dHWMkl7zV3S7tJwpKH8">
<div class="bz_alias_short_desc_container edit_form">
     <a href="1161.html"><b>Bug&nbsp;1161</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Sld files open in Windows but not Mac</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
  >Summary:</a>
</label>
</th>
          <td>Sld files open in Windows but not Mac
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a>Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          MOVED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Bio-Formats</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">Macintosh
       Mac OS
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a><u>I</u>mportance</a></label>:
      </th>
      <td>P5
       major
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a>Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2015-09-17 12:07 CDT by <span class="vcard"><span class="fn">Glen MacDonald</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2015-10-05 12:32 CDT 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>1 
          user
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="ctrueden">ctrueden</option>
            </select>
        </div>
          
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    


<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_image_sld">
        <td valign="top">
            <a href="attachment.cgi?id=262"
               title="View the content of the attachment">
          <b>Slidebook file with 3 channel 2D and 3D images</b></a>

          <span class="bz_attach_extra_info">
              (2.94 MB,
                image/sld)

            <br>
            <a href="#attach_262"
               title="Go to the comment associated with the attachment">2015-10-01 14:22 CDT</a>,

            <span class="vcard"><span class="fn">Glen MacDonald</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=262&amp;action=edit">Details</a>
        </td>
      </tr>

  </table>
<br>

  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Glen MacDonald</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-09-17 12:07:37 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Bio-Formats willl open Slidebook .sld files on Win7, Java 1.6.0_24.  Tested on .sld files from latest Slidebook back to 2008.  

Bio-formats throws exceptions on Macs running OS 10.9.5 and 10.10 with Java 1.6.0_65, 1.7.0_75, 1.8.0_51 and 60.  
Console window: 
Finding offsets to pixel data
Determining dimensions

Typical Exception Window:
(Fiji Is Just) ImageJ 2.0.0-rc-39/1.50b; Java 1.8.0_60 [64-bit]; Mac OS X 10.9.5; 44MB of 5243MB (&lt;1%)
 
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
	at java.util.ArrayList.rangeCheck(ArrayList.java:653)
	at java.util.ArrayList.get(ArrayList.java:429)
	at loci.formats.in.SlidebookReader.initFile(SlidebookReader.java:654)
	at loci.formats.FormatReader.setId(FormatReader.java:1426)
	at loci.plugins.in.ImportProcess.initializeFile(ImportProcess.java:505)
	at loci.plugins.in.ImportProcess.execute(ImportProcess.java:143)
	at loci.plugins.in.Importer.showDialogs(Importer.java:137)
	at loci.plugins.in.Importer.run(Importer.java:75)
	at loci.plugins.LociImporter.run(LociImporter.java:78)
	at ij.IJ.runUserPlugIn(IJ.java:212)
	at ij.IJ.runPlugIn(IJ.java:176)
	at ij.Executer.runCommand(Executer.java:132)
	at ij.Executer.run(Executer.java:65)
	at java.lang.Thread.run(Thread.java:745)


Regards,
Glen</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-09-17 12:21:21 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I cannot reproduce this issue with an up-to-date installation of Fiji (2.0.0-rc-39/1.50b) with Java 1.8.0_45 64-bit on OS X 10.10.4, using any of the three files I have from you previously (&quot;LOCI test&quot;, &quot;ms reflection&quot; and &quot;D3 timelapse 3&quot;).

Furthermore, given the error message, I would surprised if the issue is with OS or version of Java. It is more likely a difference between between versions of the Bio-Formats plugin. What does Help &gt; About Plugins &gt; Bio-Formats Plugins... tell you on each machine?

If the versions do actually match, then please post a non-working sample image.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Glen MacDonald</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-09-23 16:59:46 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Curtis,
I ran a fresh install on OS10.10.5, Fiji (2.0.0-rc-39/1.50b) with Java 1.6.0_65 64-bit then updated with 1.8.0_60, latest Bio-formats and still get the problem.  All Java installs are Java SE Developers Kit. Tests on different computers and Java versions were with Open as Hyperstack.  All other options not checked.  
All Macs fail to open Slidebook files with the same exception message. running bftools from command line also fails.

Both Win7 boxes (6 and 7 below) open the Slidebook files.  
 
/Library/Java/JavaVirtualMachines/jdk1.n.n_nn.jdk/
same Bio-Formats: Systems Mac 2) [fail];  Win7 7a) [open] 
same Bio-Formats: Systems Mac 3b), 4),5a),5b),6) [fail]; Win7 6), 7b) [open]
Bio-formats versions were:
1) 2012 MacBookPro
OS 10.9.5
289024a1aeff76ceaa0521e75a614e3275bd89d3, built 11 Sept 2015, Release:5.1.4-DEV
Fiji (2.0.0-rc-39/1.50b) with Java 1.8.0_51 64-bit


2) 2010 iMac
OS 10.9.5
ec25a9cdcade57643a187c31aab84032d209baaf, built 17 July 2015 Release:5.1.3
Fiji (2.0.0-rc-36/1.50a) with Java 1.6.0_65 64-bit

3a) 2009 MacPro
OS 10.9.5
9c6e5b270cee9af5becfbdc8f0c7b1a7206632aa, built 5 August 2015, Release:5.1.3-Dev
Fiji (2.0.0-rc-34/1.50a) with Java 1.8.0_51 64-bit
updated:
3b) Fiji (2.0.0-rc-34/1.50a) with Java 1.8.0_51 64-bit
Revision 05840624ab3d1d1dca14d1ccfebabcb61c42ec27 Built 3 September 2015, Release: 5.1.4

4) 2014 iMac
OS 10.9.5
Fiji (2.0.0-rc-38/1.50b) with Java 1.6.0_65 64-bit
Revision 05840624ab3d1d1dca14d1ccfebabcb61c42ec27 Built 3 September 2015, Release: 5.1.3-DEV

5a) Late 2012 iMac
OS 10.10.5
Fiji (2.0.0-rc-39/1.50b) with Java 1.6.0_65 64-bit
Revision 05840624ab3d1d1dca14d1ccfebabcb61c42ec27 Built 3 September 2015, Release: 5.14

5b) Late 2012 iMac
OS 10.10.5
Fiji (2.0.0-rc-39/1.50b) with Java 1.8.0_60 64-bit
Revision 05840624ab3d1d1dca14d1ccfebabcb61c42ec27 Built 3 September 2015, Release: 5.1.4

6) Marianas Workstation, Win7
Fiji (2.0.0-rc-39/1.50b) with Java 1.6.0_24 64-bit
Revision 05840624ab3d1d1dca14d1ccfebabcb61c42ec27 Built 3 September 2015, Release:5.1.4


7a) Slidebook Workstation, Win7
ec25a9cdcade57643a187c31aab84032d209baaf, built 17 July 2015 Release:5.1.3
Fiji (2.0.0-rc-34/1.50a) with Java 1.6.0_24 64-bit

7b) updated to:
Fiji (2.0.0-rc-39/1.50b) with Java 1.6.0_65 64-bit
Revision 05840624ab3d1d1dca14d1ccfebabcb61c42ec27 Built 3 September 2015, Release: 5.14

All the Macs were initially set up by our (former) IT guy. 

thanks,
Glen MacDonald</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-09-30 14:55:35 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I still cannot reproduce on my OS X 10.10.5 system with ImageJ 2.0.0-rc-39/1.50b and Bio-Formats 5.1.4 -- and neither with the latest Bio-Formats from the Bio-Formats update site.

I tested the three files you sent in the past: &quot;LOCI test&quot;, &quot;ms reflection&quot; and &quot;D3 timelapse 3&quot;.

Can you please confirm that these specific files fail on your OS X systems?

If not, then we will need a new non-working sample image.</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Glen MacDonald</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-10-01 14:22:53 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=262" name="attach_262" title="Slidebook file with 3 channel 2D and 3D images">attachment 262</a> <a href="attachment.cgi?id=262&amp;action=edit" title="Slidebook file with 3 channel 2D and 3D images">[details]</a></span>
Slidebook file with 3 channel 2D and 3D images</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-10-01 14:27:17 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Excellent, I can reproduce with that sample file! Thank you!</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Glen MacDonald</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-10-01 14:29:12 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Sorry, screwed up attaching the file and dumped my original comment. You have sld files dating to 2005 and 2010. I tested files around the lab and found that sld files created 6/28/2012 and earlier will open by Bio-Formats on OS10.  Newer files will not open.  The 'LOCI test.sld' reopened in Slidebook today and resaved will no longer open on Mac.  the 2 images in the file I just sent are a 2D, 3 channel, and 3 channel z-series</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-10-05 12:32:53 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I tested this on Windows 7, and received a different exception:

(Fiji Is Just) ImageJ 2.0.0-rc-39/1.50b; Java 1.8.0_05 [64-bit]; Windows 7 6.1; 32MB of 1527MB (2%)
 
java.lang.AssertionError: Failed with exception: The file is not a valid SlideBook document. Z plane index too large.

	at loci.formats.in.SlideBook6Reader.getZPosition(Native Method)
	at loci.formats.in.SlideBook6Reader.initFile(SlideBook6Reader.java:277)
	at loci.formats.FormatReader.setId(FormatReader.java:1426)
	at loci.plugins.in.ImportProcess.initializeFile(ImportProcess.java:505)
	at loci.plugins.in.ImportProcess.execute(ImportProcess.java:143)
	at loci.plugins.in.Importer.showDialogs(Importer.java:137)
	at loci.plugins.in.Importer.run(Importer.java:75)
	at loci.plugins.LociImporter.run(LociImporter.java:78)
	at ij.IJ.runUserPlugIn(IJ.java:212)
	at ij.IJ.runPlugIn(IJ.java:176)
	at ij.Executer.runCommand(Executer.java:132)
	at ij.Executer.run(Executer.java:65)
	at java.lang.Thread.run(Thread.java:745)

This suggests a likely cause of the file working on your Windows 7 systems, Glen: you have the matching version of SlideBook installed on those systems, with the SlideBook native library available on your path. Bio-Formats picks this up, uses it, and is thus able to read these files. Whereas on my Windows 7 system, the native library version does not match (almost certainly is out of date) -- hence the error above.

Anyway, I filed this issue with the Bio-Formats team at:
   <a href="https://github.com/openmicroscopy/bioformats/issues/2008">https://github.com/openmicroscopy/bioformats/issues/2008</a>

You can track further progress on the issue there.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>


</div>

</body>
</html>
