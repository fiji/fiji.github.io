<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 222 &ndash; Simple Neurite Tracer: manually placed points should be automatically refined</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    
      

      
      



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" ><!--[if lte IE 7]>
      


  <link href="skins/standard/IE-fixes.css?1492730519" rel="stylesheet"
        type="text/css" >
<![endif]-->

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" >
  </head>



  <body onload=""
        class=" bz_bug bz_status_RESOLVED bz_product_Fiji bz_component_Plugins bz_bug_222 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;222</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Simple Neurite Tracer: manually placed points should be automatically refined</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2014-06-16 16:32:04 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="bugzilla-body">


<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2014-06-16 16:32:04">
  <input type="hidden" name="longdesclength" value="8">
  <input type="hidden" name="id" value="222">
  <input type="hidden" name="token" value="1492731552-7kn92VBwOTayvsXLmG4eMvgXihVxHhAQXaSVVblrznU">
<div class="bz_alias_short_desc_container edit_form">
     <a href="show_bug.cgi?id=222"><b>Bug&nbsp;222</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Simple Neurite Tracer: manually placed points should be automatically refined</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td>Simple Neurite Tracer: manually placed points should be automatically refined
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          MOVED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Fiji"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Plugins</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       Mac OS
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P2
       normal
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">Mark Longair</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2010-08-20 10:03 CDT by <span class="vcard"><span class="fn">Yihwa Kim</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2014-06-16 16:32 CDT 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>1 
          user
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="ctrueden">ctrueden</option>
            </select>
        </div>
          
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    


<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_image_png">
        <td valign="top">
            <a href="attachment.cgi?id=26"
               title="View the content of the attachment">
          <b>the soma problem </b></a>

          <span class="bz_attach_extra_info">
              (303.83 KB,
                image/png)

            <br>
            <a href="#attach_26"
               title="Go to the comment associated with the attachment">2010-08-20 10:03 CDT</a>,

            <span class="vcard"><span class="fn">Yihwa Kim</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=26&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_image_png">
        <td valign="top">
            <a href="attachment.cgi?id=27"
               title="View the content of the attachment">
          <b>example reconstruction from the simple neurite tracer </b></a>

          <span class="bz_attach_extra_info">
              (74.27 KB,
                image/png)

            <br>
            <a href="#attach_27"
               title="Go to the comment associated with the attachment">2010-08-22 07:09 CDT</a>,

            <span class="vcard"><span class="fn">Yihwa Kim</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=27&amp;action=edit">Details</a>
        </td>
      </tr>

  </table>
<br>

  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Yihwa Kim</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-20 10:03:03 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi I am using simple neurite tracer and it seems the points don't seem to lie quite at the center. 
This problem is severe close to the soma and also at the points where I give the end points. 
Currently I have tried using both Hessian-based analysis (didn't quite optimize the sigma or multiplier yet), and Fit volume. 
Neither of them quite seem to do the job. 
I will attach an image in the following report. 

Best wishes
Yihwa</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Yihwa Kim</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-20 10:03:37 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=26" name="attach_26" title="the soma problem">attachment 26</a> <a href="attachment.cgi?id=26&amp;action=edit" title="the soma problem">[details]</a></span>
the soma problem</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Longair</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-20 12:24:41 CDT
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="#c0">comment #0</a>)
<span class="quote">&gt; Hi I am using simple neurite tracer and it seems the points don't seem to lie
&gt; quite at the center. 
&gt; This problem is severe close to the soma and also at the points where I give
&gt; the end points. 
&gt; Currently I have tried using both Hessian-based analysis (didn't quite optimize
&gt; the sigma or multiplier yet), and Fit volume. 
&gt; Neither of them quite seem to do the job. 
&gt; I will attach an image in the following report. 
&gt; 
&gt; Best wishes
&gt; Yihwa</span >

Yihwa,

The effect you see in the soma is because the Hessian-based analysis particularly picks out tube-like structures, and the centre of the soma isn't tubelike.  (If you use the &quot;Tubeness&quot; plugin on your image you will probably see that the centre of the soma is completely dark, and only the surface is bright - the surface is more &quot;tube-like&quot; with this algorithm.)

The simplest solution for the soma is to turn off the &quot;Hessian-based analysis&quot; option for going from the centre of the soma to the start of the branch, and turn it on again for the genuinely tube-like parts of the structure.  (In general I turn this option on and off quite a bit when using the plugin, depending on whether the naive algorithm is actually producing better results. If you don't change the value of sigma then turning this option on and off won't take any time.)

I'm not sure what you mean by the problem at the end points - is that just that the path has kinks in it in the fainter regions?  Does switching off the option help in those situations?

Thanks for your bug report.

regards,
mark</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Yihwa Kim</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-22 07:09:00 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=27" name="attach_27" title="example reconstruction from the simple neurite tracer">attachment 27</a> <a href="attachment.cgi?id=27&amp;action=edit" title="example reconstruction from the simple neurite tracer">[details]</a></span>
example reconstruction from the simple neurite tracer 

Hi Mark, 

Thanks for the comment. 
I have attached an image from the simple neurite tracer. 
You can see some discontinuities, which I think are the points where I have put an end point. The algorithm seems to do pretty well between two points. However, the problem seems to arise at the location where I define at the end point. 
(I have turned on the hessian-based analysis for the tubular structures and didn't from the soma to the first tubular structure.)
I wonder if there is anyway to remove such discontinuities that arise due to the manual selection of intermediate(or end) points. 

Thank you in advance!

Best wishes

Yihwa</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Longair</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-09-10 15:28:06 CDT
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="#c3">comment #3</a>)
&gt;
<span class="quote">&gt; Hi Mark, 
&gt; 
&gt; Thanks for the comment. 
&gt; I have attached an image from the simple neurite tracer. 
&gt; You can see some discontinuities, which I think are the points where I have put
&gt; an end point. The algorithm seems to do pretty well between two points.
&gt; However, the problem seems to arise at the location where I define at the end
&gt; point. 
&gt; (I have turned on the hessian-based analysis for the tubular structures and
&gt; didn't from the soma to the first tubular structure.)
&gt; I wonder if there is anyway to remove such discontinuities that arise due to
&gt; the manual selection of intermediate(or end) points. 
&gt; 
&gt; Thank you in advance!
&gt; 
&gt; Best wishes
&gt; 
&gt; Yihwa </span >

Yihwa,

At the moment the points you manually specify are considered fixed, so won't be adjusted by the &quot;Fit Volume&quot; option, for example.  This is a limitation that I intend to fix, but it needs a bit of careful work.  There are two plans I have for this:

- Allow manual adjustment of where the points are at any stage
- Allowing the fitting to adjust the manually placed points as well as the intermediate points

In the mean time, my suggestion would be to select the intermediate points in a zoomed-in view, using the three-pane view to find the midline of the neuron.  I've just released a version which has some improvements to make this easier, so make sure that you run &quot;Help &gt; Update Fiji&quot; and check that VIB-lib.jar and Simple_Neurite_Tracer.jar are up-to-date.  Then there's a short tutorial here explaining what I mean:

   <a href="http://pacific.mpi-cbg.de/wiki/index.php/Simple_Neurite_Tracer:_Accurate_point_placement">http://pacific.mpi-cbg.de/wiki/index.php/Simple_Neurite_Tracer:_Accurate_point_placement</a>
</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-05-12 06:35:35 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Mark, am I correct in my assumption that you won't be able to fix this?</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Longair</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-05-12 12:11:07 CDT
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="#c5">comment #5</a>)
<span class="quote">&gt; Mark, am I correct in my assumption that you won't be able to fix this?</span >

I'm not likely to have any time to deal with this for a little while.  However, I had been talking with Fethallah about using the OOF preprocessed data to automatically refine point placement, and it's definitely something we'd both like to do.

If you don't mind, I'd like to leave this bug open - I've changed the title to more accurately reflect what the problem is.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 16:32:04 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Mark, I hope you don't mind that I am migrating this bug to the GitHub Issue tracker:

<a href="https://github.com/fiji/Simple_Neurite_Tracer/issues/1">https://github.com/fiji/Simple_Neurite_Tracer/issues/1</a></pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>


</div>

</body>
</html>
