<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 789 &ndash; lsm files do not open</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=789&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=789">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=789">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=789">



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css?1492730519" rel="stylesheet"
        type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css?1492730519" rel="stylesheet"
        type="text/css" ><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" ><!--[if lte IE 7]>
      


  <link href="skins/standard/IE-fixes.css?1492730519" rel="stylesheet"
        type="text/css" >
<![endif]-->

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" >
  </head>



  <body onload=""
        class=" bz_bug bz_status_CLOSED bz_product_Fiji bz_component_Plugins bz_bug_789 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;789</p>
    </td>

    <td id="subtitle">
      <p class="subheader">lsm files do not open</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2014-06-19 02:19:18 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="bugzilla-body">


<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2014-06-19 02:19:18">
  <input type="hidden" name="longdesclength" value="21">
  <input type="hidden" name="id" value="789">
  <input type="hidden" name="token" value="1492731791-i7_gQWdJmQ8W9f8j_lC6LC4kKin-m2JP945rOAajydI">
<div class="bz_alias_short_desc_container edit_form">
     <a href="show_bug.cgi?id=789"><b>Bug&nbsp;789</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">lsm files do not open</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td>lsm files do not open
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">CLOSED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Fiji"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Plugins</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       Linux
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P4
       normal
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2014-06-16 06:29 CDT by <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2014-06-19 02:19 CDT 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>2 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="baigouy">baigouy</option>
                <option value="hinerm">hinerm</option>
            </select>
        </div>
          
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    


<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_application_zip">
        <td valign="top">
            <a href="attachment.cgi?id=162"
               title="View the content of the attachment">
          <b>LUT not read properly</b></a>

          <span class="bz_attach_extra_info">
              (2.59 MB,
                application/zip)

            <br>
            <a href="#attach_162"
               title="Go to the comment associated with the attachment">2014-06-16 10:53 CDT</a>,

            <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=162&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_application_java-archive">
        <td valign="top">
            <a href="attachment.cgi?id=165"
               title="View the content of the attachment">
          <b>SCIFIO patch</b></a>

          <span class="bz_attach_extra_info">
              (914.93 KB,
                application/java-archive)

            <br>
            <a href="#attach_165"
               title="Go to the comment associated with the attachment">2014-06-17 07:52 CDT</a>,

            <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=165&amp;action=edit">Details</a>
        </td>
      </tr>

  </table>
<br>

  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 06:29:22 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi everyone,

after my last update I can't open LSM files anymore (did not try other files). here is the log that pops up when I run File&gt;open
(Fiji Is Just) ImageJ 2.0.0-rc-5/1.49b; Java 1.6.0_24 [64-bit]; Linux 3.13.0-29-generic; 28MB of 10155MB (&lt;1%)
 
java.lang.NullPointerException
	at io.scif.filters.ChannelFillerMetadata.populateImageMetadata(ChannelFillerMetadata.java:118)
	at io.scif.filters.AbstractMetadataWrapper.wrap(AbstractMetadataWrapper.java:89)
	at io.scif.filters.AbstractReaderFilter.setParent(AbstractReaderFilter.java:155)
	at io.scif.filters.MasterFilterHelper.updateParents(MasterFilterHelper.java:190)
	at io.scif.filters.MasterFilterHelper.enable(MasterFilterHelper.java:130)
	at io.scif.filters.ReaderFilter.enable(ReaderFilter.java:66)
	at io.scif.img.ImgOpener.createReader(ImgOpener.java:543)
	at io.scif.img.ImgOpener.openImgs(ImgOpener.java:144)
	at net.imagej.DefaultDatasetService.open(DefaultDatasetService.java:257)
	at net.imagej.DefaultDatasetService.open(DefaultDatasetService.java:241)
	at net.imagej.io.DatasetIOPlugin.open(DatasetIOPlugin.java:78)
	at net.imagej.io.DatasetIOPlugin.open(DatasetIOPlugin.java:50)
	at net.imagej.legacy.plugin.DefaultLegacyOpener.open(DefaultLegacyOpener.java:135)
	at net.imagej.legacy.DefaultLegacyHooks.interceptFileOpen(DefaultLegacyHooks.java:434)
	at net.imagej.legacy.DefaultLegacyHooks.interceptRunPlugIn(DefaultLegacyHooks.java:156)
	at ij.IJ.runPlugIn(IJ.java)
	at ij.Executer.runCommand(Executer.java:131)
	at ij.Executer.run(Executer.java:64)
	at java.lang.Thread.run(Thread.java:662)

best,

benoit

Information about your version of Java:

  os.arch =&gt; amd64
  os.name =&gt; Linux
  os.version =&gt; 3.13.0-29-generic
  java.version =&gt; 1.6.0_24
  java.vendor =&gt; Sun Microsystems Inc.
  java.runtime.name =&gt; Java(TM) SE Runtime Environment
  java.runtime.version =&gt; 1.6.0_24-b07
  java.vm.name =&gt; Java HotSpot(TM) 64-Bit Server VM
  java.vm.version =&gt; 19.1-b02
  java.vm.vendor =&gt; Sun Microsystems Inc.
  java.vm.info =&gt; mixed mode
  java.awt.graphicsenv =&gt; sun.awt.X11GraphicsEnvironment
  java.specification.name =&gt; Java Platform API Specification
  java.specification.version =&gt; 1.6
  sun.cpu.endian =&gt; little
  sun.desktop =&gt; gnome
  file.separator =&gt; /

The up-to-date check says: REMIND_LATER

Information relevant to JAVA_HOME related problems:

  JAVA_HOME is set to: /home/benoit/Fiji.app/java/linux-amd64/jdk1.6.0_24//jre
  imagej.dir =&gt; /home/benoit/Fiji.app

Information about the version of each plugin:

Activated update sites:
ImageJ: <a href="http://update.imagej.net/">http://update.imagej.net/</a> (last check:20140615004004)
Fiji: <a href="http://fiji.sc/update/">http://fiji.sc/update/</a> (last check:20140612230314)
IBMP-CNRS: <a href="http://www-ibmp.u-strasbg.fr/fijiupdates/">http://www-ibmp.u-strasbg.fr/fijiupdates/</a> (last check:20140526164644)
ScientiFig: <a href="http://sites.imagej.net/Aigouy/">http://sites.imagej.net/Aigouy/</a> (last check:20140516135525)

Files not up-to-date:
  a5d02cb7 (LOCAL_ONLY) 20131005162326 plugins/Kymo_graph1001.jar
  740a32b3 (LOCAL_ONLY) 20140109112924 plugins/SplittedChannelsMerger_.class
  d31ed141 (LOCAL_ONLY) 20131016094131 plugins/Stack_Focuser_.class
  5f60d96e (LOCAL_ONLY) 20140306085844 plugins/Watershed_.jar</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 07:23:57 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Benoit,

 This was an issue with assuming indexed color images always would have luts available. Looks like this is incorrect and there are false color images with no attached lookup table.

 Fixed in <a href="https://github.com/scifio/scifio/commit/2bf5781c2a96c0b5d837a80fa115e6ded0895d90">https://github.com/scifio/scifio/commit/2bf5781c2a96c0b5d837a80fa115e6ded0895d90</a> and should be uploaded to Fiji today.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 07:26:44 CDT
        </span>
      </div>



<pre class="bz_comment_text" >thanks for your quick answer and happy that you solved the problem.

best,

benoit</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 08:31:01 CDT
        </span>
      </div>



<pre class="bz_comment_text" >This fix is now uploaded to Fiji. If you still have issues after updating your Fiji, please let us know!

Thanks for the report Benoit!</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 08:57:23 CDT
        </span>
      </div>



<pre class="bz_comment_text" >it works partially, I mean I can now open the lsm file but the LUT is lost (maybe your non null LUT asumption was correct and the problem is rather that a bug occurs when you try to read Lut from the file). I also noticed and I don't know whether the two bugs are related or not, that when I open a composite RGB image, (that has green as first channel, red as second channel and blue as last channel) the LUTs are not read properly in IJ2, meaning the first channel is always red, the second is always green and the last is blue (as if again it would not read LuTs properly). Could it be that you just have a general pb with the LUTs ?

best,

benoit</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 09:21:48 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Benoit,

 Would you mind opening another issue and using Help &gt; Upload Sample Image to upload the GRB dataset? I need to look at it to see exactly how the LUT is being used.

 But this does seem like two separate issues - one with lut interpretation and one with reading. You could definitely be right that the lut on your LSM is not being read properly (or not propagated through the framework) leading to the null value. Could you use Help &gt; Upload Sample Image for the LSM dataset that generated the initial NullPointerException on this issue?

 I had a test LSM lying around that generated the same error.. but it's false color, and Bio-Formats truly has no LUT for it, so I'd like to work with your data if possible.

 Anyway I think our LUT code needs some love at all layers, so thank you for providing the motivation to make it better.
- Mark</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 09:39:56 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Dear Mark,

I have uploaded a tila_000.lsm file that should reproduce the null bug. i have uploaded testGRB.tif file that you can use to test the RGB error and opened a new bug report for it let me know if there was a problem with the upload.

best,

B</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 09:45:45 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Benoit,

Got the testGRB.tif but not the tila_000.lsm. Feel free to just attach it to this bug report if it's OK being public (Upload Sample Images puts it in a private location).

Thanks for opening #794.

- Mark</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 10:53:20 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=162" name="attach_162" title="LUT not read properly">attachment 162</a> <a href="attachment.cgi?id=162&amp;action=edit" title="LUT not read properly">[details]</a></span>
LUT not read properly</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 10:59:28 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I don't know if this is the same thing that's happening with your data Benoit, but with my smaple dataset it seems there are some issues with reading color tables by the Zeiss LSM reader, and if your dataset is 16-bit then there is no way for the LUT to be retrieved right now (for the dataset I have, it's 16-bit but the color table has 500 entries in it... it is not clear why, or how that lut should be interpreted for 16-bit index values)

I've opened these issues in the Bio-Formats trac:

<a href="https://trac.openmicroscopy.org.uk/ome/ticket/12383">https://trac.openmicroscopy.org.uk/ome/ticket/12383</a>

<a href="https://trac.openmicroscopy.org.uk/ome/ticket/12384">https://trac.openmicroscopy.org.uk/ome/ticket/12384</a></pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 11:19:49 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Unfortunately I can't provide you with the lsm I initially used (since the data is important for my research and I can't make it public) but this file was generated using similar conditions and shows the same LUT error in my hands (by the way this not precious lsm I attached to bugzilla is 8 bits and shows no lut neither, the initial dataset I used was 16 bits so the bug seems to be independent of bit depth). No clue about the reason neither, I just can say that IJ 1.x used to load some green palette with this file.

thanks a lot for your answers and reports to the loci people.

have a nice day,

B</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-16 12:43:57 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Benoit,

 Just wanted you to know that this sample LSM is very helpful. Bio-Formats definitely returns the LUT from this dataset so the problem is in how that information is used by IJ2 and its components. I will investigate and let you know when there is a fix in place.

 I just wanted to confirm.. does your 16 bit LSM that you can't share look appropriate when you open it with &quot;File &gt; Import &gt; Bio-Formats&quot;?

Thank you,
Mark</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-17 01:27:42 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,

I checked and indeed opening the file with file&gt;import&gt;bioformat does open the file correctly and with the right LUT (provided I select Colorized or composite in color mode. Hope this helps.

best,

B</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-17 07:52:18 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=165" name="attach_165" title="SCIFIO patch">attachment 165</a> <a href="attachment.cgi?id=165&amp;action=edit" title="SCIFIO patch">[details]</a></span>
SCIFIO patch

potentially fixed SCIFIO jar</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-17 07:57:23 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Benoit,

 I attached a potential new SCIFIO jar (see attachment: SCIFIO patch). It displays the tila_000.lsm with a green lut but I wanted you to test it on your private data as well to ensure that the fix is appropriate.

To test locally:
1) Download the SCIFIO patch (scifio-0.15.3-SNAPSHOT.jar)
2) In your Fiji.app/jars delete scifio-0.15.2.jar
3) Move scifio-0.15.3-SNAPSHOT.jar to Fiji.app/jars
4) Open your data

Let me know how the test goes.

Thanks!
- Mark</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-17 08:20:14 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Thanks Mark,

it works for the 8 bit image but not for the 16 bit one, I'll try to acquire a new mock 16bit image tomorrow which I can share with you so that you can finalize the fix for 16bits image as well.

best,

B</pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-17 08:38:11 CDT
        </span>
      </div>



<pre class="bz_comment_text" >That would be great. Thanks Benoit!

Just so you know, if you use Help &gt; Upload Sample Image it does go to a protected page in the fiji.sc wiki that is only accessible by wiki accounts with credentials that we only give out to trusted Fiji developers. It is intended to allow users to upload sensitive/private data with the assurance it will not be distributed or exploited.

But I completely understand if you'd feel more comfortable acquiring a new dataset!</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-18 03:16:27 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi mark,

I have just uploaded a file called crap16.lsm that is 16 bits with a green LUT. Hope this is helpful.

best,

benoit</pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-18 07:12:37 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Fantastic. Thanks Benoit, looking at it now.

Unsurprisingly, I found some significant problems with color table propagation and use yesterday. I'm hoping to get this wrapped up today.</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-18 15:02:22 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Should be fixed in the latest Fiji. Thanks again for the sample data Benoit.</pre>
    </div><div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=789#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Benoit Aigouy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-19 02:19:18 CDT
        </span>
      </div>



<pre class="bz_comment_text" >works like a charm. Great job!

best,

benoit</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>


</div>

</body>
</html>
